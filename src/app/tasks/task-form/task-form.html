<div class="container mx-auto p-4 max-w-lg">
    <h2 class="text-3xl font-bold mb-6 text-center text-gray-800">
        {{ isEditMode ? 'Edit Task' : 'Create New Task' }}
    </h2>

    <form [formGroup]="taskForm" (ngSubmit)="onSubmit()" class="bg-white p-8 rounded-lg shadow-lg space-y-4">
        <div>
            <label for="title" class="block text-sm font-medium text-gray-700">Title</label>
            <input id="title" formControlName="title" type="text"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
            <div *ngIf="taskForm.get('title')?.invalid && (taskForm.get('title')?.dirty || taskForm.get('title')?.touched)"
                class="text-red-500 text-sm mt-1">
                Title is required.
            </div>
        </div>

        <div>
            <label for="description" class="block text-sm font-medium text-gray-700">Description</label>
            <textarea id="description" formControlName="description" rows="3"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"></textarea>
        </div>

        <div>
            <label for="status" class="block text-sm font-medium text-gray-700">Status</label>
            <select id="status" formControlName="status"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                <option value="to_do">Pending</option>
                <option value="in_progress">In-Progress</option>
                <option value="completed">Completed</option>
            </select>
        </div>
        <div>
            <label for="assigned_to_user_id" class="block text-sm font-medium text-gray-700">Assign To</label>
            <select id="assigned_to_user_id" formControlName="assigned_to_user_id"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                <option value="" disabled>Select a user</option>
                <option *ngFor="let user of users" [value]="user.id">
                    {{ user.username }}
                </option>
            </select>
            <div *ngIf="taskForm.get('assigned_to_user_id')?.invalid && (taskForm.get('assigned_to_user_id')?.dirty || taskForm.get('assigned_to_user_id')?.touched)"
                class="text-red-500 text-sm mt-1">
                Assignment is required.
            </div>
        </div>
        <div>
            <label for="dueDate" class="block text-sm font-medium text-gray-700">Due Date</label>
            <input id="dueDate" formControlName="due_date" type="date"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
        </div>

        <button type="submit" [disabled]="!taskForm.valid"
            class="w-full px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50">
            {{ isEditMode ? 'Update Task' : 'Create Task' }}
        </button>
    </form>
</div>